<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Delta NFT</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="resources/images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="resources/images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="resources/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="resources/images/favicon.png">

    <!--
      SEO: If your mobile URL is different from the desktop URL,
      add a canonical link to the desktop page 
      https://developers.google.com/webmasters/smartphone-sites/feature-phones
    -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <style>
      body:after{
        content:"";position:fixed;opacity:0;
        transition:opacity 0.5s ease-in;
        top:0px;left:0px;bottom:0px;right:0px;
        width:100vw;height:100%;z-index:1000;
        background:center no-repeat url("/resources/images/loading.svg");
        background-size:100px;pointer-events:none;
        z-index:10000;
      }
      body.loading>.mdl-layout__container,
      body.loading>.mdl-layout{opacity:0;}
      body.loading:after,
      body:not(.loading)>.mdl-layout__container,
      body:not(.loading)>.mdl-layout{opacity:1}
      body.loading:after{pointer-events:initial;}
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_purple-pink.min.css">
    <link rel="stylesheet" href="resources/fonts/blender-pro/stylesheet.css">
    <link rel="stylesheet" href="resources/styles.css">
    <script src="resources/js/app.js"></script>
    <script src="/static/node_modules/@solana/web3.js/lib/index.iife.js"></script>
    <script type="module">
      import * as dnft from './dnft/dnft.js';
      (async () => {
          let {PhantomWalletAdapter, WalletReadyState} = await import("/static/solana.js");
          const wasm = await dnft.default('./dnft/dnft_bg.wasm');
          
          dnft.init_console_panic_hook();
          console.log("init kaizen");
          //dnft.init_kaizen(dnft,{},{});
          dnft.init_kaizen(dnft, solanaWeb3, {PhantomWalletAdapter, WalletReadyState});
          let program_id = dnft.dnft_program_id();
          let authority = new dnft.Pubkey("42bML5qB3WkMwfa2cosypjUrN7F2PLQm4qhxBdRDyW7f");
          console.log("program_id: ",program_id, "authority: ",authority);
          console.dir(dnft)
          //let transport = await dnft.Transport.InProcUnitTests(program_id,authority);
          let transport = await new dnft.Transport("http://localhost:8899");
          console.log("transport", transport)
          console.log("init kaizen done");

          /*
          let mint = new dnft.Pubkey("6QJ6DFusKuQMdZLrQixdGFmC8WLnzMSuq9KJPpavbhrS");
          let accounts = await transport.getProgramAccounts(program_id, {
            filters: [
                {
                    memcmp: {
                        offset: 8, // number of bytes
                        bytes: mint.toString(), // base58 encoded string
                    },
                },
                {
                    memcmp: {
                        offset: 40, // number of bytes
                        bytes: "1" //base58.encode([0]), // base58 encoded string
                    },
                },
            ]
          });

          console.log("getProgramAccounts:::: ", accounts);
          */

          //await dnft.run_mint_test();

          //await dnft.createRoot();
          //let a = dnft.check_f64_number("-1.7976931348623158e+308");
          //console.log("check_f64_number:" , a)
          
          let app = new App(dnft, transport);
          //dnft.run_test();
          //window.app = app
      })();
  </script>
  </head>
  <body class="mdl-dnft mdl-color--grey-100 mdl-color-text--grey-700 mdl-base loading">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--fixed1 mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
          <h3>Delta NFT</h3>
          <div class="mdl-layout-spacer"></div>
          <div class="wallet-connect-container">
            <div class="connect-btn">
              <button id="wallet-connect" class="mdl-button mdl-button--big mdl-js-button mdl-button--raised mdl-button--accent">Connect Wallet</button>
            </div>
            <div class="connected-msg">
              <!--button id="wallet-disconnect" class="mdl-button mdl-button--big mdl-js-button mdl-button--raised mdl-button--accent">Disconnect Wallet</button-->
              <div>Connected</div>
              <div id="wallet-pubkey"></div>
            </div>
          </div>
        </div>
        <div id="top-tabs" class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
            <a href="#browse" class="mdl-layout__tab is-active">Browse NFTs</a>
            <a href="#browse-mints" class="mdl-layout__tab">Browse Mints</a>
            <a href="#create-dnft" class="mdl-layout__tab">Create  Mint</a>
        </div>
      </header>
      <main class="mdl-layout__content">
        <div class="mdl-layout__tab-panel is-active" id="browse">
          <div class="main-container no-records" id="browse-nft-container">
            <h2>NFTs</h2>
            <div class="mdl-grid" id="nft-list">

            </div>
            <template id="nft-panel-tpl">
              <div class="nft-panel mdl-cell mdl-card mdl-shadow--2dp">
                <div class="nft-image mdl-card__title">
                  <span class="nft-pubkey"></span>
                  <h2 class="nft-title mdl-card__title-text"></h2>
                </div>
                <div class="mdl-card__supporting-text">
                  <div class="nft-description"></div>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a href="#" class="mdl-button _mdl-button--raised">See availability</a>
                </div>
              </div>
            </section>
          </template>
          </div>
        </div>
        <div class="mdl-layout__tab-panel" id="browse-mints">
          <div class="main-container no-records" id="browse-mint-container">
            <h2>Select Mint</h2>
            <table width="100%" class="mdl-data-table">
              <thead>
                <tr>
                  <th class="mdl-data-table__cell--non-numeric" width="30%">Name</th>
                  <th class="mdl-data-table__cell--non-numeric" width="65%">Description</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="schema-list"></tbody>
            </table>
            <dialog id="mint-form-dialog" class="mdl-dialog mint-form-dialog">
              <h4 class="mdl-dialog__title">Mint DNFT</h4>
              <div class="mdl-dialog__content">
                <div id="mint-form-fields" class="form-panel"></div>
              </div>
              <div class="mdl-dialog__actions">
                <button id="mint-dnft-btn" class="mdl-button mdl-js-button mdl-button--big mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                  Mint DNFT
                </button>
                <button type="button" class="mdl-button mdl-button--big close-dialog">Close</button>
              </div>
            </dialog>
          </div>
        </div>
        <div class="mdl-layout__tab-panel" id="create-dnft">
          <div class="main-container no-fields" id="create-dnft-main-container">
            <h2>Create DNFT MINT</h2>

            <div class="add-field-msg">
              <button class="add-field-btn mdl-button mdl-button--big mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                Add fields
              </button>
            </div>
            <div class="fields-info">
              <div class="h-flex center">
                  <h5 class="flex">Fields:</h5>
                  <button class="add-field-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                    Add
                  </button>
              </div>
              <table width="100%" class="mdl-data-table mdl-shadow--2dp">
                <thead>
                  <tr>
                    <th class="mdl-data-table__cell--non-numeric">Data Type</th>
                    <th class="mdl-data-table__cell--non-numeric" width="20%">Field Name</th>
                    <th class="mdl-data-table__cell--non-numeric" width="60%">Description</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="field-list" class="sortable-list">
                  <!--tr>
                    <td class="mdl-data-table__cell--non-numeric">String</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Name</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Item Name</td>
                    <td class="actions">
                      <button class="mdl-button mdl-button--icon" data-action="move-down">
                        <i class="material-icons">
                          expand_more
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="move-up">
                        <i class="material-icons">
                          expand_less
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="delete">
                        <i class="material-icons">delete</i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td class="mdl-data-table__cell--non-numeric">u8</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Color</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Item Color</td>
                    <td class="actions">
                      <button class="mdl-button mdl-button--icon" data-action="move-down">
                        <i class="material-icons">
                          expand_more
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="move-up">
                        <i class="material-icons">
                          expand_less
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="delete">
                        <i class="material-icons">delete</i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <td class="mdl-data-table__cell--non-numeric">u16</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Speed</td>
                    <td class="mdl-data-table__cell--non-numeric" contentEditable="true">Item Speed</td>
                    <td class="actions">
                      <button class="mdl-button mdl-button--icon" data-action="move-down">
                        <i class="material-icons">
                          expand_more
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="move-up">
                        <i class="material-icons">
                          expand_less
                        </i>
                      </button>
                      <button class="mdl-button mdl-button--icon" data-action="delete">
                        <i class="material-icons">delete</i>
                      </button>
                    </td>
                  </tr-->
                </tbody>
              </table>
              <div class="action-bar">
                <button id="create-dnft-mint-btn" class="mdl-button mdl-js-button mdl-button--big mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                  Create DNFT Mint
                </button>
              </div>
            </div>

            <dialog id="add-field-dialog" class="mdl-dialog">
              <h4 class="mdl-dialog__title">Select field type</h4>
              <div class="mdl-dialog__content">
                <table width="100%" class="mdl-data-table">
                  <thead>
                    <tr>
                      <!--th> </th-->
                      <th class="mdl-data-table__cell--non-numeric" width="30%">Data Type</th>
                      <th class="mdl-data-table__cell--non-numeric" width="70%">Description</th>
                    </tr>
                  </thead>
                  <tbody id="field-type-list">
                  </tbody>
                </table>
              </div>
              <div class="mdl-dialog__actions">
                <!--button class="mdl-button mdl-js-button add-fields mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                  Add
                </button-->
                <button type="button" class="mdl-button close-dialog">Close</button>
              </div>
            </dialog>
          </div>
        </div>
        <footer class="mdl-mega-footer">
            <div class="mdl-mega-footer--middle-section">
            <div class="mdl-mega-footer--drop-down-section">
                <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
                <h1 class="mdl-mega-footer--heading">Features</h1>
                <ul class="mdl-mega-footer--link-list">
                <li><a href="#">About</a></li>
                <li><a href="#">Terms</a></li>
                <li><a href="#">Partners</a></li>
                <li><a href="#">Updates</a></li>
                </ul>
            </div>
            <div class="mdl-mega-footer--drop-down-section">
                <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
                <h1 class="mdl-mega-footer--heading">Details</h1>
                <ul class="mdl-mega-footer--link-list">
                <li><a href="#">Spec</a></li>
                <li><a href="#">Tools</a></li>
                <li><a href="#">Resources</a></li>
                </ul>
            </div>
            <div class="mdl-mega-footer--drop-down-section">
                <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
                <h1 class="mdl-mega-footer--heading">Technology</h1>
                <ul class="mdl-mega-footer--link-list">
                <li><a href="#">How it works</a></li>
                <li><a href="#">Patterns</a></li>
                <li><a href="#">Usage</a></li>
                <li><a href="#">Products</a></li>
                <li><a href="#">Contracts</a></li>
                </ul>
            </div>
            <div class="mdl-mega-footer--drop-down-section">
                <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
                <h1 class="mdl-mega-footer--heading">FAQ</h1>
                <ul class="mdl-mega-footer--link-list">
                <li><a href="#">Questions</a></li>
                <li><a href="#">Answers</a></li>
                <li><a href="#">Contact us</a></li>
                </ul>
            </div>
            </div>
            <div class="mdl-mega-footer--bottom-section">
            <div class="mdl-logo">
                More Information
            </div>
            <ul class="mdl-mega-footer--link-list">
                <li><a href="https://developers.google.com/web/starter-kit/">Web Starter Kit</a></li>
                <li><a href="#">Help</a></li>
                <li><a href="#">Privacy and Terms</a></li>
            </ul>
            </div>
        </footer>
    </main>
</div>
<!--a href="https://github.com/google/material-design-lite/blob/mdl-1.x/templates/text-only/" target="_blank" id="view-source" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--accent mdl-color-text--accent-contrast">View Source</a-->
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</body>
</html>